<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="index, follow">
{{- if .Description }}
<meta name="description" content="{{ .Description }}">
{{- else if .Site.Params.description }}
<meta name="description" content="{{ .Site.Params.description }}">
{{- end }}
<title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

{{- /* Favicon */ -}}
<link rel="icon" href="{{ "favicon.ico" | absURL }}">

{{- /* CSS */ -}}
{{- $css := resources.Get "css/main.css" | fingerprint }}
<link rel="stylesheet" href="{{ $css.Permalink }}">

{{- /* Theme initialization (before page render to prevent flash) */ -}}
<script>
  (function() {
    const stored = localStorage.getItem('theme');
    if (stored) {
      document.documentElement.dataset.theme = stored;
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.dataset.theme = 'dark';
    }
  })();
</script>

{{- /* MathJax */ -}}
{{- if .Site.Params.mathjax }}
<script>
  MathJax = {
    tex: {
      inlineMath: [['\\(', '\\)']],
      displayMath: [['\\[', '\\]'], ['$$', '$$']],
      processEscapes: true
    }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
{{- end }}
